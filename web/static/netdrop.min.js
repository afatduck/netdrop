(()=>{var e={729:function(e,t){var r,n;void 0===(n="function"==typeof(r=function(){return function e(t,r,n){var a,o,l=window,i="application/octet-stream",c=n||i,u=t,s=!r&&!n&&u,f=document.createElement("a"),p=function(e){return String(e)},m=l.Blob||l.MozBlob||l.WebKitBlob||p,d=r||"download";if(m=m.call?m.bind(l):Blob,"true"===String(this)&&(c=(u=[u,c])[0],u=u[1]),s&&s.length<2048&&(d=s.split("/").pop().split("?")[0],f.href=s,-1!==f.href.indexOf(s))){var y=new XMLHttpRequest;return y.open("GET",s,!0),y.responseType="blob",y.onload=function(t){e(t.target.response,d,i)},setTimeout((function(){y.send()}),0),y}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(u)){if(!(u.length>2096103.424&&m!==p))return navigator.msSaveBlob?navigator.msSaveBlob(v(u),d):S(u);c=(u=v(u)).type||i}else if(/([\x80-\xff])/.test(u)){for(var b=0,g=new Uint8Array(u.length),h=g.length;b<h;++b)g[b]=u.charCodeAt(b);u=new m([g],{type:c})}function v(e){for(var t=e.split(/[:;,]/),r=t[1],n=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),a=n.length,o=0,l=new Uint8Array(a);o<a;++o)l[o]=n.charCodeAt(o);return new m([l],{type:r})}function S(e,t){if("download"in f)return f.href=e,f.setAttribute("download",d),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout((function(){f.click(),document.body.removeChild(f),!0===t&&setTimeout((function(){l.URL.revokeObjectURL(f.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,i)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var r=document.createElement("iframe");document.body.appendChild(r),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,i)),r.src=e,setTimeout((function(){document.body.removeChild(r)}),333)}if(a=u instanceof m?u:new m([u],{type:c}),navigator.msSaveBlob)return navigator.msSaveBlob(a,d);if(l.URL)S(l.URL.createObjectURL(a),!0);else{if("string"==typeof a||a.constructor===p)try{return S("data:"+c+";base64,"+l.btoa(a))}catch(e){return S("data:"+c+","+encodeURIComponent(a))}(o=new FileReader).onload=function(e){S(this.result)},o.readAsDataURL(a)}return!0}})?r.apply(t,[]):r)||(e.exports=n)}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};r.r(e),r.d(e,{updateCdir:()=>D,updateError:()=>P,updateLevel:()=>I,updatePath:()=>x,updateProgress:()=>U,updateUser:()=>C});const t=React;var n=r.n(t);const a=ReactDOM,o=ReactRedux,l=Redux;function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=function(e){return e.sort((function(e,t){return("dir"==e.type?0:1)-("dir"==t.type?0:1)}))},p=function(e,t){return 0==t?e.substr(0,e.lastIndexOf("/")):e+="/"+t},m=["B","KB","MB","GB"],d=function(e){var t,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){i=!0,o=e},f:function(){try{l||null==r.return||r.return()}finally{if(i)throw o}}}}(m);try{for(r.s();!(t=r.n()).done;){var n=t.value;if("GB"==n||e<1024)return Math.round(10*e)/10+n;e/=1024}}catch(e){r.e(e)}finally{r.f()}};function y(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}var w=(0,l.combineReducers)({globals:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_ERROR":return e.error=t.payload,c({},e);case"UPDATE_LEVEL":return e.state==t.payload||""==t.payload?e:(e.state=t.payload,c({},e));case"UPDATE_USER":return e.user=t.payload,c({},e);default:return e}},cdir:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.payload&&"UPDATE_CDIR"==t.type&&e!=t.payload?Array.isArray(t.payload)?f(t.payload):(e.push(t.payload),f(y(e))):e},path:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".",t=arguments.length>1?arguments[1]:void 0;return"UPDATE_PATH"==t.type?-1==t.payload?".":p(e,t.payload):e},progress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;if("UPDATE_PROGRESS"==t.type)switch(S(t.payload)){case"number":return e.percentage=t.payload,h({},e);case"string":return e.title=t.payload,h({},e);case"object":return t.payload;default:return null}return e}});function E(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(a){return"function"==typeof a?a(r,n,e):t(a)}}}}var O=E();O.withExtraArgument=E;const N=O;var j=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.compose,A=(0,l.createStore)(w,{globals:{state:"CONNECTING",error:"",user:null}},(0,l.compose)((0,l.applyMiddleware)(N),j())),T=function(){return n().createElement("button",{onClick:function(){localStorage.clear(),location.reload()},name:"reset",className:"btn btn-sm btn-warning mt-5"},"Reset")},P=function(e){return function(t){t({type:"UPDATE_ERROR",payload:e})}},I=function(e){return function(t){t({type:"UPDATE_LEVEL",payload:e})}},C=function(e){return function(t){t({type:"UPDATE_USER",payload:e})}},D=function(e){return function(t){t({type:"UPDATE_CDIR",payload:e})}},x=function(e){return function(t){t({type:"UPDATE_PATH",payload:e})}},U=function(e){return function(t){t({type:"UPDATE_PROGRESS",payload:e})}};function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var L=function(){var r,a,i=(0,o.useDispatch)(),c=(0,l.bindActionCreators)(e,i).updateLevel,u=(r=(0,t.useState)(!0),a=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}}(r,a)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}(r,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=u[0],f=u[1],p=function(){f(!0),$.ajax({url:globalThis.apiLocation,type:"GET",timeout:1e4}).fail((function(){f(!1)})).done((function(){c("USING")}))};return(0,t.useEffect)((function(){p()}),[]),n().createElement("div",null,n().createElement("h3",null,s?"Connecting to Netdrop API.":"Failed to connect to Netdrop API."),s?n().createElement("div",{className:"spinner-border",role:"status"},n().createElement("span",{className:"sr-only"})):n().createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:function(){p()}},"Try Again"))};function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var F=function(){(0,o.useSelector)((function(e){return e.globals.user}));var r=(0,o.useDispatch)(),a=(0,l.bindActionCreators)(e,r),i=a.updateLevel,c=a.updateCdir,u=a.updatePath,s=M((0,t.useState)(!1),2),f=s[0],p=s[1],m=M((0,t.useState)(!1),2),d=m[0],y=m[1],b=M((0,t.useState)(""),2),g=b[0],h=b[1],v=M((0,t.useState)({host:localStorage.getItem("host")||"",user:localStorage.getItem("user")||"",password:"",secure:"true"==localStorage.getItem("secure")}),2),S=v[0],w=v[1],E=function(e){var t=e.target,r=t.value,n=t.name,a=t.checked;w((function(e){return e[n]="secure"==n?a:r,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)}))},O=function(e){e.preventDefault(),0!=S.host.length?(p(!0),$.ajax({url:globalThis.apiLocation+"listdir",type:"post",timeout:2e4,contentType:"application/json; charset=utf-8",processData:!1,data:JSON.stringify({Host:S.host,Username:S.user,Password:S.password,Secure:S.secure,Path:""})}).fail((function(){i("CONNECTING")})).done((function(e){p(!1),e.result?(h(""),c(e.dirList),y(!1),u(-1),localStorage.setItem("user",S.user),localStorage.setItem("host",S.host),localStorage.setItem("secure",S.secure?"true":"false"),globalThis.ftpPassword=S.password):h(e.errors[0])}))):h("Host field is required.")};return n().createElement("div",null,n().createElement("button",{className:"btn btn-primary btn-sm mr-5 d-block",type:"button",onClick:function(){y(!0)}},"New Connection"),function(){if(d)return n().createElement("div",{className:"overlay"},n().createElement("form",{className:"bg-white",onSubmit:O},n().createElement("i",{className:"fas fa-times",onClick:function(){y(!1)}}),n().createElement("div",{className:"form-group"},n().createElement("label",{htmlFor:"ftp_host_input"},"Host:"),n().createElement("input",{type:"text",className:"form-control",name:"host",placeholder:"Host",id:"ftp_host_input",autoComplete:"ftphost",value:S.host,onChange:E})),n().createElement("div",{className:"form-group"},n().createElement("label",{htmlFor:"ftp_username_input"},"Username:"),n().createElement("input",{type:"text",className:"form-control",name:"user",placeholder:"Username",id:"ftp_user_input",autoComplete:"ftpuser",value:S.user,onChange:E})),n().createElement("div",{className:"form-group"},n().createElement("label",{htmlFor:"ftp_password_input"},"Password:"),n().createElement("input",{type:"password",className:"form-control",name:"password",placeholder:"Password",id:"ftp_password_input",autoComplete:"ftppassword",value:S.password,onChange:E})),n().createElement("div",{className:"form-check"},n().createElement("input",{type:"checkbox",className:"form-check-input",name:"secure",id:"ftp_secure_check",checked:S.secure,onChange:E}),n().createElement("label",{className:"form-check-label",htmlFor:"ftp_secure_check"},"Secure Connection")),n().createElement("p",{className:"text-danger"},g),f?n().createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},n().createElement("span",{className:"sr-only"})):n().createElement("button",{type:"submit",id:"account_button",className:"btn btn-primary"},"Connect")))}())},B=r(729),J=r.n(B);function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}}(e,t)||q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){if(e){if("string"==typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?X(e,t):void 0}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var z=function(r){var a=(0,o.useSelector)((function(e){return e})),i=a.path,c=a.cdir,u=(0,o.useDispatch)(),s=(0,l.bindActionCreators)(e,u),f=s.updateError,p=s.updateCdir,m=H((0,t.useState)(!1),2),d=m[0],y=m[1],b=H((0,t.useState)(!1),2),g=b[0],h=b[1],v=H((0,t.useState)(r.name),2),S=v[0],w=v[1];return n().createElement("span",{className:"d-flex justify-content-between align-items-center"},d?n().createElement("form",{className:"form-inline",onSubmit:function(e){e.preventDefault(),h(!0),$.ajax({url:globalThis.apiLocation+"rename",type:"POST",contentType:"application/json; charset=utf-8",processData:!1,data:JSON.stringify({path:"/"+i+"/"+r.name,name:S,host:localStorage.getItem("host"),user:localStorage.getItem("user"),pword:globalThis.ftpPassword}),success:function(e){if(e)f(e);else{f("");var t,n=function(e){if(Array.isArray(e))return X(e)}(l=c)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(l)||q(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=q(e))){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){i=!0,o=e},f:function(){try{l||null==r.return||r.return()}finally{if(i)throw o}}}}(n);try{for(a.s();!(t=a.n()).done;){var o=t.value;o.name==r.name&&(o.name=S)}}catch(e){a.e(e)}finally{a.f()}p(n)}var l}}).done((function(){h(!1),y(!1)}))},onClick:function(e){e.stopPropagation()}},n().createElement("div",{className:"form-group"},n().createElement("input",{className:"form-control",value:S,onChange:function(e){w(e.target.value)}}))):n().createElement("span",null,r.name),g?n().createElement("div",{className:"spinner-border spinner-border-sm ml-4",role:"status"},n().createElement("span",{className:"sr-only"})):n().createElement("i",{className:"fas fa-pen ml-2",onClick:function(e){e.stopPropagation(),y(!d),w(r.name)}}))};function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var K=function(r){var a,i,c=(0,o.useSelector)((function(e){return e})),u=c.path,s=c.cdir,f=(0,o.useDispatch)(),p=(0,l.bindActionCreators)(e,f),m=p.updateError,d=p.updateCdir,y=(a=(0,t.useState)(!1),i=2,function(e){if(Array.isArray(e))return e}(a)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}}(a,i)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}(a,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=y[0],g=y[1];return b?n().createElement("div",{className:"spinner-border spinner-border-sm ml-4",role:"status"},n().createElement("span",{className:"sr-only"})):n().createElement("i",{className:"fas fa-trash ml-4",onClick:function(e){e.stopPropagation(),g(!0),$.ajax({type:"POST",url:globalThis.apiLocation+"delete",contentType:"application/json; charset=utf-8",processData:!1,data:JSON.stringify({path:"/"+u+"/"+r.name,host:localStorage.getItem("host"),user:localStorage.getItem("user"),pword:globalThis.ftpPassword}),success:function(e){e?m(e):(d(s.filter((function(e){return e.name!=r.name}))),m(""))}}).fail((function(){m("Something went wrong")})).done((function(){g(!1)}))}})},W=function(){var e=(0,o.useSelector)((function(e){return e.progress}));return null!=e?n().createElement("div",{className:"progressOverlay"},n().createElement("div",{className:"container-xl bg-light d-flex flex-column align-content-center m-6"},n().createElement("h2",{className:"text-center m-4"},e.title),n().createElement("div",{className:"m-4"},n().createElement("div",{className:"progress-bar progress-bar-striped progress-bar-animated",style:{width:e.percentage+"%"}},e.percentage,"%")))):null};function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Q=function(){var r,a,i=(0,o.useSelector)((function(e){return e.path})),c=(0,o.useDispatch)(),u=(0,l.bindActionCreators)(e,c),s=u.updateError,f=u.updateProgress,p=u.updateCdir,m=u.updateLevel,d=(r=(0,t.useState)(0),a=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}}(r,a)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(e,t):void 0}}(r,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=d[0],b=d[1];return n().createElement("form",{className:"form-inline",onSubmit:function(e){e.preventDefault();for(var t=new FormData,r=0;r<$("#uploadfiles")[0].files.length;r++)t.append("files",$("#uploadfiles")[0].files[r]);t.append("dataJson",JSON.stringify({path:i.substr(1),host:localStorage.getItem("host"),user:localStorage.getItem("user"),pword:globalThis.ftpPassword})),f({title:"Uploading files...",percentage:0}),$.ajax({xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){if(e.lengthComputable){var t=Math.trunc(e.loaded/e.total*100);100==t&&f({title:"Copying files...",percentage:101}),f(t)}}),!1),e},type:"POST",url:globalThis.apiLocation+"upload",contentType:!1,processData:!1,data:t}).fail((function(){m("CONNECTING")})).done((function(e){var t;f({title:"Transfering files...",percentage:0}),t=setInterval((function(){$.ajax({url:globalThis.apiLocation+"checkupload",type:"POST",contentType:"application/json; charset=utf-8",processData:!1,data:JSON.stringify(e),success:function(e){var r=JSON.parse(e);if(-1==r||100==r)return clearInterval(t),f(null),s(-1==r?"Something went wrong.":""),void $.ajax(globalThis.apiLocation+"listdir",{type:"POST",data:JSON.stringify({Host:localStorage.getItem("host"),Username:localStorage.getItem("user"),Password:globalThis.ftpPassword,Secure:"true"==localStorage.getItem("secure"),Path:i.substr(2)}),processData:!1,contentType:"application/json; charset=utf-8"}).done((function(e){e.result?(p(e.dirList),$("#dirlist")[0].scrollTop=0):s(e.errors[0])})).fail((function(){m("CONNECTING")}));f(r)}})}),750)}))}},n().createElement("label",{htmlFor:"uploadfiles"},n().createElement("u",{style:{cursor:"pointer"}},y?"Selected ".concat(y," file").concat(1==y?"":"s"):"Select files"),n().createElement("input",{type:"file",id:"uploadfiles",name:"files",onChange:function(e){b(e.target.files.length)},multiple:!0,className:"d-none"})),n().createElement("button",{type:"submit",className:"btn btn-outline-primary d-inline-block ml-2 btn-sm",disabled:!y},"Upload"),n().createElement(W,null))};function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var te=function(){var r=(0,o.useSelector)((function(e){return e.path})),a=(0,o.useDispatch)(),i=(0,l.bindActionCreators)(e,a),c=i.updateCdir,u=i.updateError,s=Z((0,t.useState)(""),2),f=s[0],p=s[1],m=Z((0,t.useState)(!1),2),d=m[0],y=m[1];return n().createElement("form",{className:"form-inline ml-auto",onSubmit:function(e){e.preventDefault(),y(!0),$.ajax({url:globalThis.apiLocation+"createdir",processData:!1,contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify({host:localStorage.getItem("host")+r.substr(1)+"/"+f,user:localStorage.getItem("user"),pword:globalThis.ftpPassword}),success:function(e){if(e)u(e);else{var t=new Date;c({name:f,size:null,modify:"".concat(t.getMonth()+1,"/").concat(t.getDate(),"/").concat(t.getFullYear()," ").concat(t.getHours(),":").concat(t.getMinutes()),type:"dir"})}}}).fail((function(){u("Something went wrong")})).done((function(){y(!1)}))}},n().createElement("div",{className:"form-group"},n().createElement("input",{className:"form-control input-sm text-center",type:"text",placeholder:"dir name",value:f,onChange:function(e){p(e.target.value)}})),d?n().createElement("div",{className:"spinner-border spinner-border-sm ml-2",role:"status"},n().createElement("span",{className:"sr-only"})):n().createElement("button",{type:"submit",className:"btn btn-outline-primary ml-2",disabled:!f},"Create Dir"))};function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ne=function(){var t=(0,o.useSelector)((function(e){return e})),r=t.cdir,a=t.path,i=(0,o.useDispatch)(),c=(0,l.bindActionCreators)(e,i),u=c.updatePath,s=c.updateCdir,f=c.updateError,m=c.updateProgress;if(!r)return null;var y,b=function(e){var t=e.currentTarget.getAttribute("data-dir");$.ajax(globalThis.apiLocation+"listdir",{type:"POST",data:JSON.stringify({Host:localStorage.getItem("host"),Username:localStorage.getItem("user"),Password:globalThis.ftpPassword,Secure:"true"==localStorage.getItem("Secure"),Path:p(a,t).substr(2)}),processData:!1,contentType:"application/json; charset=utf-8"}).done((function(e){e.result?(u(t),s(e.dirList),f(""),$("#dirlist")[0].scrollTop=0):f(e.errors[0])}))},g=function(e){var t,r,n,o,l=e.currentTarget.getAttribute("data-dir");$.ajax(globalThis.apiLocation+"download",{type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify({path:localStorage.getItem("host")+a.replace(".","")+"/"+l,user:localStorage.getItem("user"),pword:globalThis.ftpPassword}),success:function(e){(e=JSON.parse(e)).error?f(e.error):(f(""),t=e.url,r=e.size,n=e.mime,m({title:"Getting File",percentage:0}),o=setInterval((function(){$.ajax(globalThis.apiLocation+"progress",{type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),success:function(e){if(e=JSON.parse(e),m(Math.round(e/r*100)),e==r){clearInterval(o),m({title:"Downloading File",percentage:0});var a=new XMLHttpRequest;a.addEventListener("progress",(function(e){try{m(Math.round(e.loaded/e.total*100))}catch(e){}e.loaded==e.total&&(setTimeout((function(){J()(a.response,l,n)}),0),m(null))})),a.responseType="blob",a.open("get",globalThis.apiLocation+t),a.setRequestHeader("Accept","*/*"),a.send()}}})}),750))}})},h="."==a?[]:[n().createElement("li",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center list-group-item-info","data-dir":0,onClick:b,style:{cursor:"pointer"}},n().createElement("span",null,".."),n().createElement("span",{className:"badge badge-secondary"},"Parent Dir"))],v=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?re(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){i=!0,o=e},f:function(){try{l||null==r.return||r.return()}finally{if(i)throw o}}}}(r);try{for(v.s();!(y=v.n()).done;){var S=y.value;h.push(n().createElement("li",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center"+("dir"==S.type?" list-group-item-info":""),"data-dir":S.name,onClick:"dir"==S.type?b:g,style:{cursor:"pointer"}},n().createElement(z,{name:S.name,key:(new Date).getTime()}),"file"==S.type?n().createElement("span",{style:{margin:"0 1em 0 auto"}},d(parseInt(S.size))):"",n().createElement("span",{className:"badge badge-secondary",style:"dir"==S.type?{marginLeft:"auto"}:{}},S.modify),n().createElement(K,{name:S.name,key:"d"+(new Date).getTime()})))}}catch(e){v.e(e)}finally{v.f()}return n().createElement("div",{className:"mt-4"},n().createElement("div",{className:"d-flex"},n().createElement(Q,{key:"uf"}),n().createElement(te,{key:"cd"})),n().createElement("ul",{className:"mt-1 list-group",id:"dirlist"},h,n().createElement(W,null)),n().createElement("span",null,a))};function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ie(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ce=function(r){var a=(0,o.useDispatch)(),i=(0,l.bindActionCreators)(e,a),c=i.updateUser,u=i.updateLevel,s=le((0,t.useState)("Sign In"),2),f=s[0],p=s[1],m=le((0,t.useState)(!1),2),d=m[0],y=m[1],b=le((0,t.useState)(""),2),g=b[0],h=b[1],v=le((0,t.useState)({user:"",password:"",repeat:""}),2),S=v[0],w=v[1],E=function(e){h("");var t=e.target,r=t.name,n=t.value;w((function(e){return e[r]=n,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)}))};return n().createElement("div",{className:"overlay"},n().createElement("form",{className:"bg-white",onSubmit:function(e){e.preventDefault(),d||(S.password.length*S.user.length*("Sign In"==f?1:S.repeat.length)!=0?S.password==S.repeat||"Sign In"==f?(h(""),y(!0),$.ajax({url:globalThis.apiLocation+("Sign In"==f?"login":"register"),type:"POST",contentType:"application/json; charset=utf-8",processData:!1,crossDomain:!0,xhrFields:{withCredentials:!0},timeout:1e4,data:JSON.stringify({Username:S.user,Password:S.password})}).done((function(e){if(y(!1),e.result)return c(e.userData),r.close(!1),void localStorage.setItem("logged-in","true");h(e.errors[0])})).fail((function(){u("CONNECTING")}))):h("Passwords do not match."):h("Can't have empty fields."))}},n().createElement("i",{className:"fas fa-times",onClick:function(){r.close(!1)}}),n().createElement("div",{className:"form-group"},n().createElement("label",{htmlFor:"account_username_input"},"Username:"),n().createElement("input",{type:"text",className:"form-control",name:"user",placeholder:"Username",id:"account_user_input",value:S.user,onChange:E})),n().createElement("div",{className:"form-group"},n().createElement("label",{htmlFor:"account_password_input"},"Password:"),n().createElement("input",{type:"password",className:"form-control",name:"password",placeholder:"Password",id:"account_password_input",value:S.password,onChange:E})),"Sign In"==f?null:n().createElement("div",{className:"form-group"},n().createElement("label",{htmlFor:"account_repeat_input"},"Repeat Password:"),n().createElement("input",{type:"password",className:"form-control",name:"repeat",placeholder:"Repeat password",id:"account_repeat_input",value:S.repeat,onChange:E})),"Sign In"==f?n().createElement("button",{type:"button",className:"btn btn-outline-info btn-sm ml-auto d-block mb-2",onClick:function(){p("Sign Up")}},"Don't have an account."):n().createElement("button",{type:"button",className:"btn btn-outline-info btn-sm ml-auto d-block mb-2",onClick:function(){p("Sign In")}},"Already have an account."),n().createElement("p",{className:"text-danger"},g),d?n().createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},n().createElement("span",{className:"sr-only"})):n().createElement("button",{type:"submit",id:"account_button",className:"btn btn-primary"},f)))};function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?se(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fe=function(){var r=(0,o.useSelector)((function(e){return e.globals.user})),a=(0,o.useDispatch)(),i=(0,l.bindActionCreators)(e,a),c=i.updateUser,u=i.updateLevel,s=ue((0,t.useState)(!1),2),f=s[0],p=s[1],m=ue((0,t.useState)(!1),2),d=m[0],y=m[1];return(0,t.useEffect)((function(){localStorage.getItem("logged-in")&&(p(!0),$.ajax({url:globalThis.apiLocation+"logininfo",type:"GET",crossDomain:!0,xhrFields:{withCredentials:!0},timeout:1e4}).done((function(e){c(e)})).always((function(){p(!1)})))}),[]),n().createElement("div",{className:"d-flex align-items-center"},d?n().createElement(ce,{close:y}):null,r?"Logged in as: ".concat(r.username):"Not logged in.",f?n().createElement("div",{className:"spinner-border spinner-border-sm ml-2 mr-2",role:"status"},n().createElement("span",{className:"sr-only"})):n().createElement("button",{type:"button",className:"btn btn-outline-primary btn-sm ml-2",onClick:function(){if(r)return p(!0),void $.ajax({url:globalThis.apiLocation+"logout",type:"GET",crossDomain:!0,xhrFields:{withCredentials:!0},timeout:1e4}).done((function(){localStorage.removeItem("logged-in"),c(null)})).fail((function(){u("CONNECTING")})).always((function(){p(!1)}));y(!0)}},r?"Sign out":"Sign in"))};function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}globalThis.apiLocation=localStorage.getItem("apiLocation")||"http://calc.world:5008/api/",$(document).ready((function(){var r=function(){var r,a,i=(0,o.useDispatch)(),c=(0,l.bindActionCreators)(e,i).updateLevel,u=(0,o.useSelector)((function(e){return e})).globals,s=(r=(0,t.useState)(globalThis.apiLocation.includes("localhost")),a=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return o}}(r,a)||function(e,t){if(e){if("string"==typeof e)return pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pe(e,t):void 0}}(r,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=s[0],p=s[1];return n().createElement("div",null,n().createElement("nav",{className:"navbar navbar-extend-sm bg-light"},n().createElement("a",{className:"navbar-brand mr-auto"},"Netdrop"),"USING"==u.state?n().createElement("div",{className:"row mr-2"},n().createElement(F,null),n().createElement(fe,{key:f?"a":"B"})):null),n().createElement("section",{className:"container-fluid p-4"},function(){if("CONNECTING"==u.state)return n().createElement(L,{key:f?"a":"B"})}(),n().createElement(ne,null),n().createElement("h5",{className:"text-danger mt-3"},u.error),n().createElement("button",{type:"button",className:"btn btn-info btn-sm",onClick:function(){p(!f),localStorage.setItem("apiLocation","http://".concat(f?"calc.world":"localhost",":5008/api/")),globalThis.apiLocation=localStorage.getItem("apiLocation"),c("CONNECTING")}},"Switch to ".concat(f?"online":"localhost"," api")),n().createElement("br",null),n().createElement(T,null)))};(0,a.render)(n().createElement(o.Provider,{store:A},n().createElement(r,null)),$("#root")[0])}))})()})();